<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Avaliador de Corridas</title>
  <meta name="theme-color" content="#0b0c10">
  <link rel="manifest" href="./manifest.webmanifest">
  <style>
    :root { --gap: 12px; --radius: 14px; }
    html, body { margin:0; padding:0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Inter, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', Arial; background:#0b0c10; color:#f1f5f9; }
    .wrap { max-width: 900px; margin:0 auto; padding:20px 16px 40px; }
    h1 { font-size:1.6rem; margin:4px 0 12px; letter-spacing:-0.3px; }
    .subtitle { color:#93a4bf; margin:0 0 16px; font-size:0.95rem; }
    .card { background:#111319; border:1px solid #1f2430; border-radius:var(--radius); padding:16px; box-shadow:0 10px 30px rgba(0,0,0,0.25); margin-bottom:14px; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:var(--gap); }
    @media (max-width: 700px) { .grid { grid-template-columns:1fr; } }
    label { font-size:0.88rem; color:#cbd5e1; display:block; margin-bottom:6px; }
    input[type="number"], input[type="text"], select { width:100%; padding:12px; border-radius:10px; border:1px solid #263045; background:#0d1117; color:#e2e8f0; font-size:1rem; outline:none; transition:border-color .2s ease; -webkit-appearance:none; }
    input:focus, select:focus { border-color:#3b82f6; }
    .row { margin-bottom:var(--gap); }
    .actions { display:flex; gap:var(--gap); flex-wrap:wrap; margin-top:8px; }
    button { padding:12px 16px; border-radius:10px; border:1px solid #2a334a; background:#1a2236; color:#e2e8f0; font-size:1rem; cursor:pointer; transition:transform .02s ease, background .2s ease, border-color .2s ease; touch-action:manipulation; }
    button:active { transform:scale(0.99); }
    .primary { background:#2563eb; border-color:#1d4ed8; color:#fff; }
    .ghost { background:transparent; }
    .result { margin-top:16px; padding:16px; border-radius:var(--radius); background:#0f172a; border:1px solid #23314f; }
    .ok { border-color:#16a34a; box-shadow:0 0 0 1px rgba(22,163,74,.25) inset; }
    .warn { border-color:#f59e0b; box-shadow:0 0 0 1px rgba(245,158,11,.2) inset; }
    .bad { border-color:#ef4444; box-shadow:0 0 0 1px rgba(239,68,68,.2) inset; }
    .kpis { display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:var(--gap); margin-top:12px; }
    @media (max-width: 480px) { .kpis { grid-template-columns:1fr; } }
    .kpi { background:#0b1223; border:1px solid #1e2a44; border-radius:12px; padding:12px; }
    .kpi h3 { margin:0 0 4px; font-size:0.95rem; color:#cbd5e1; }
    .kpi p { margin:0; font-size:1.1rem; font-weight:600; }
    .fine { color:#22c55e; } .meh { color:#f59e0b; } .fail { color:#ef4444; }
    small.muted { color:#94a3b8; display:block; margin-top:8px; line-height:1.35; }
    .footer { margin-top:18px; color:#93a4bf; font-size:0.9rem; }
    .footer a { color:#93c5fd; }
    .row.inline { display:flex; align-items:center; gap:10px; }
    .row.inline label { margin:0; }
    .reasons { margin-top:10px; color:#cbd5e1; } .reasons li { margin-bottom:6px; }
    .presets { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .preset { padding:8px 10px; border-radius:999px; border:1px solid #2a334a; background:#0c1426; cursor:pointer; font-size:0.92rem; }
    .preset:hover { border-color:#3b82f6; }
    .weights { display:grid; grid-template-columns: repeat(4, 1fr); gap:var(--gap); margin-top:8px; }
    @media (max-width: 700px) { .weights { grid-template-columns: 1fr 1fr; } }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üöó Avaliador de Corridas</h1>
    <p class="subtitle">Decida <b>aceitar</b> ou <b>recusar</b> com base nas suas metas. Use somente parado/estacionado. N√£o automatize outros apps.</p>

    <div class="card">
      <h3 style="margin-top:0">Oferta atual</h3>
      <div class="grid">
        <div class="row"><label for="tarifa">Valor mostrado ao motorista (R$)</label><input id="tarifa" type="number" inputmode="decimal" step="0.01" placeholder="Ex.: 18.90"></div>
        <div class="row"><label for="dist">Dist√¢ncia da corrida (km)</label><input id="dist" type="number" inputmode="decimal" step="0.1" placeholder="Ex.: 7.5"></div>
        <div class="row"><label for="dur">Dura√ß√£o da corrida (min)</label><input id="dur" type="number" inputmode="decimal" step="1" placeholder="Ex.: 16"></div>
        <div class="row"><label for="deadhead">Dist√¢ncia at√© o pickup (km)</label><input id="deadhead" type="number" inputmode="decimal" step="0.1" placeholder="Ex.: 1.8"></div>
        <div class="row"><label for="pedagios">Ped√°gios/estacionamento (R$)</label><input id="pedagios" type="number" inputmode="decimal" step="0.01" placeholder="Ex.: 4.50"></div>
        <div class="row"><label for="bonus">B√¥nus/promos (R$)</label><input id="bonus" type="number" inputmode="decimal" step="0.01" placeholder="Ex.: 3.00"></div>
      </div>
      <div class="row inline"><input type="checkbox" id="valorLiquido" checked><label for="valorLiquido">O valor acima j√° √© o que voc√™ recebe (Uber j√° descontado)</label></div>
      <div class="row" id="taxaPlataformaWrap" style="display:none;"><label for="taxaPlataforma">Taxa da plataforma (%)</label><input id="taxaPlataforma" type="number" inputmode="decimal" step="1" placeholder="Ex.: 25"></div>
    </div>

    <div class="card">
      <h3 style="margin-top:0">Seus custos e metas</h3>
      <div class="grid">
        <div class="row"><label for="metah">Meta de ganho <u>l√≠quido</u> (R$/h)</label><input id="metah" type="number" inputmode="decimal" step="1" placeholder="Ex.: 40"></div>
        <div class="row"><label for="metaKm">Meta de ganho l√≠quido (R$/km)</label><input id="metaKm" type="number" inputmode="decimal" step="0.1" placeholder="Ex.: 2.00"></div>
        <div class="row"><label for="c_km">Custo operacional (R$/km)</label><input id="c_km" type="number" inputmode="decimal" step="0.01" placeholder="Ex.: 1.10"></div>
        <div class="row"><label for="c_h">Custo de tempo (R$/h)</label><input id="c_h" type="number" inputmode="decimal" step="1" placeholder="5"></div>
        <div class="row"><label for="vm">Velocidade m√©dia at√© o pickup (km/h)</label><input id="vm" type="number" inputmode="decimal" step="1" placeholder="25"></div>
        <div class="row"><label for="scoreMin">Score m√≠nimo para aceitar (0‚Äì100)</label><input id="scoreMin" type="number" inputmode="decimal" step="1" placeholder="70"></div>
      </div>

      <div class="grid">
        <div class="row"><label for="maxDeadheadKm">M√°x. pickup (km)</label><input id="maxDeadheadKm" type="number" inputmode="decimal" step="0.1" placeholder="3"></div>
        <div class="row"><label for="maxDeadheadRatio">M√°x. pickup/viagem (%)</label><input id="maxDeadheadRatio" type="number" inputmode="decimal" step="1" placeholder="60"></div>
        <div class="row"><label for="minTarifa">Tarifa m√≠nima (R$)</label><input id="minTarifa" type="number" inputmode="decimal" step="0.5" placeholder="8"></div>
        <div class="row"><label for="minDur">Dura√ß√£o m√≠nima (min)</label><input id="minDur" type="number" inputmode="decimal" step="1" placeholder="6"></div>
      </div>

      <div class="weights">
        <div class="row"><label for="w_h">Peso R$/h (%)</label><input id="w_h" type="number" inputmode="decimal" step="1" placeholder="50"></div>
        <div class="row"><label for="w_km">Peso R$/km (%)</label><input id="w_km" type="number" inputmode="decimal" step="1" placeholder="30"></div>
        <div class="row"><label for="w_dead">Peso Pickup (%)</label><input id="w_dead" type="number" inputmode="decimal" step="1" placeholder="10"></div>
        <div class="row"><label for="w_dur">Peso Dura√ß√£o (%)</label><input id="w_dur" type="number" inputmode="decimal" step="1" placeholder="10"></div>
      </div>

      <div class="presets">
        <span class="preset" onclick="aplicarPreset('off')">Preset: Hor√°rio normal</span>
        <span class="preset" onclick="aplicarPreset('pico')">Preset: Pico</span>
        <span class="preset" onclick="aplicarPreset('madrugada')">Preset: Madrugada</span>
        <span class="preset" onclick="aplicarPreset('chuva')">Preset: Chuva</span>
        <span class="preset" onclick="aplicarPreset('aeroporto')">Preset: Aeroporto</span>
        <span class="preset" onclick="aplicarPreset('centro')">Preset: Centro/Bairro</span>
      </div>

      <div class="actions">
        <button class="ghost" onclick="salvarPadroes()">Salvar padr√µes</button>
        <button class="ghost" onclick="exportar()">Exportar config</button>
        <button class="ghost" onclick="importar()">Importar config</button>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-top:0">Analisar</h3>
      <div class="actions">
        <button class="primary" onclick="calcular()">Calcular</button>
        <button class="ghost" onclick="limpar()">Limpar oferta</button>
        <button class="ghost" onclick="addAtalho()">Instalar atalho na tela inicial</button>
        <button class="ghost" onclick="compartilhar()">Compartilhar resumo</button>
      </div>
      <div id="res" class="result" style="display:none;"></div>
    </div>

    <!-- SESS√ÉO DE TRABALHO -->
    <div class="card" id="sessao">
      <h3 style="margin-top:0">Sess√£o de trabalho</h3>
      <div class="kpis">
        <div class="kpi"><h3>Horas trabalhadas</h3><p id="sessHoras">00:00</p></div>
        <div class="kpi"><h3>Faturado (l√≠quido)</h3><p id="sessFaturado">R$ 0,00</p></div>
        <div class="kpi"><h3>Corridas</h3><p id="sessCorridas">0</p></div>
        <div class="kpi"><h3>M√©dia (R$/h)</h3><p id="sessMedia">R$ 0,00</p></div>
      </div>
      <div class="actions" style="margin-top:10px;">
        <button class="primary" id="btnSessToggle">Iniciar</button>
        <button class="ghost" id="btnSessAdd">Adicionar corrida atual</button>
        <button class="ghost" id="btnSessReset">Zerar sess√£o</button>
      </div>
      <small class="muted">Dica: inicie ao come√ßar o turno e v√° somando as corridas analisadas. O tempo considera o cron√¥metro + dura√ß√£o total das corridas adicionadas.</small>
    </div>

    <div class="footer">
      Seguran√ßa: utilize apenas com o carro <b>parado</b>. N√£o interfira nem automatize apps de terceiros ‚Äî risco de violar termos. Este app calcula com base nas informa√ß√µes inseridas manualmente.
    </div>
  </div>

  <script>
    // JavaScript code remains the same as previously provided
  </script>
</body>
</html>
